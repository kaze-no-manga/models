# Generated schema - DO NOT EDIT MANUALLY
# Run `npm run merge-schema` to regenerate

# Base Schema - Root Types

type Query {
  _empty: String
}

type Mutation {
  _empty: String
}

# User Domain - Authentication & Preferences

type User {
  id: ID!
  email: String!
  name: String
  avatar: String
  preferences: UserPreferences!
  createdAt: String!
  updatedAt: String!
}

type UserPreferences {
  notifications: NotificationPreferences!
  reader: ReaderPreferences!
}

type NotificationPreferences {
  email: Boolean!
  push: Boolean!
  maxPerDay: Int!
}

type ReaderPreferences {
  imageWidth: ImageWidth!
  spacing: Int!
  theme: Theme!
}

# Enums
enum ImageWidth {
  FIT
  FULL
}

enum Theme {
  LIGHT
  DARK
  AUTO
}

# Queries
extend type Query {
  getProfile: User!
}

# Mutations
extend type Mutation {
  updatePreferences(input: UserPreferencesInput!): User!
}

# Inputs
input UserPreferencesInput {
  notifications: NotificationPreferencesInput
  reader: ReaderPreferencesInput
}

input NotificationPreferencesInput {
  email: Boolean
  push: Boolean
  maxPerDay: Int
}

input ReaderPreferencesInput {
  imageWidth: ImageWidth
  spacing: Int
  theme: Theme
}

# Content Domain - Manga & Chapters

type Manga {
  id: ID!
  title: String!
  altTitles: [String!]!
  description: String
  coverImage: String
  status: MangaStatus!
  genres: [String!]!
  authors: [String!]!
  year: Int
  sourceId: ID!
  sourceMangaId: String!
  sourceUrl: String!
  createdAt: String!
  updatedAt: String!
}

type Chapter {
  id: ID!
  mangaId: ID!
  sourceId: ID!
  number: Float!
  title: String
  releaseDate: String
  images: [ChapterImage!]!
  createdAt: String!
  updatedAt: String!
}

type ChapterImage {
  url: String!
  originalUrl: String!
  page: Int!
  width: Int
  height: Int
}

# Enums
enum MangaStatus {
  ONGOING
  COMPLETED
  HIATUS
  CANCELLED
}

# Queries
extend type Query {
  searchManga(query: String!): [Manga!]!
  getManga(id: ID!): Manga
  getChapters(mangaId: ID!): [Chapter!]!
}

# Mutations
extend type Mutation {
  createManga(input: CreateMangaInput!): Manga!
}

# Inputs
input CreateMangaInput {
  title: String!
  altTitles: [String!]!
  description: String
  coverImage: String
  status: MangaStatus!
  genres: [String!]!
  authors: [String!]!
  year: Int
  sourceId: ID!
  sourceMangaId: String!
  sourceUrl: String!
}

# Library Domain - User's Reading Progress

type LibraryEntry {
  userId: ID!
  mangaId: ID!
  status: ReadingStatus!
  rating: Int
  notes: String
  currentChapterId: ID
  currentChapterNumber: Float
  lastReadAt: String
  addedAt: String!
  updatedAt: String!
}

type ReadingHistory {
  id: ID!
  userId: ID!
  mangaId: ID!
  chapterId: ID!
  chapterNumber: Float!
  completed: Boolean!
  readAt: String!
}

# Enums
enum ReadingStatus {
  READING
  COMPLETED
  PLAN_TO_READ
  DROPPED
  ON_HOLD
}

# Queries
extend type Query {
  getLibrary: [LibraryEntry!]!
  getReadingHistory(limit: Int): [ReadingHistory!]!
}

# Mutations
extend type Mutation {
  addToLibrary(mangaId: ID!): LibraryEntry!
  updateLibraryEntry(mangaId: ID!, input: UpdateLibraryEntryInput!): LibraryEntry!
  removeFromLibrary(mangaId: ID!): Boolean!
  updateProgress(mangaId: ID!, chapterId: ID!): LibraryEntry!
  markChapterAsRead(chapterId: ID!): ReadingHistory!
}

# Inputs
input UpdateLibraryEntryInput {
  status: ReadingStatus
  rating: Int
  notes: String
}
