# Content Domain - Manga & Chapters

type Manga {
  id: ID!
  slug: String!
  title: String!
  altTitles: [String!]!
  description: String
  cover: String
  status: MangaStatus!
  genres: [String!]!
  authors: [String!]!
  year: Int
  totalChapters: Int
  isNsfw: Boolean!
  sourceName: String!
  sourceId: String!
  createdAt: String!
  updatedAt: String!
}

type Chapter {
  id: ID!
  mangaId: ID!
  number: Float!
  title: String
  releaseDate: String
  images: [ChapterImage!]!
  createdAt: String!
  updatedAt: String!
}

type ChapterImage {
  url: String!
  originalUrl: String!
  page: Int!
  width: Int
  height: Int
}

# Enums
enum MangaStatus {
  ONGOING
  COMPLETED
  HIATUS
  CANCELLED
}

# Inputs
input CreateMangaInput {
  slug: String!
  title: String!
  altTitles: [String!]!
  description: String
  cover: String
  status: MangaStatus!
  genres: [String!]!
  authors: [String!]!
  year: Int
  totalChapters: Int
  isNsfw: Boolean!
  sourceName: String!
  sourceId: String!
}

input UpdateMangaInput {
  slug: String
  title: String
  altTitles: [String!]
  description: String
  cover: String
  status: MangaStatus
  genres: [String!]
  authors: [String!]
  year: Int
  totalChapters: Int
  isNsfw: Boolean
  sourceName: String
  sourceId: String
}

input CreateChapterInput {
  mangaId: ID!
  number: Float!
  title: String
  releaseDate: String
  images: [ChapterImageInput!]!
}

input UpdateChapterInput {
  number: Float
  title: String
  releaseDate: String
  images: [ChapterImageInput!]
}

input ChapterImageInput {
  url: String!
  originalUrl: String!
  page: Int!
  width: Int
  height: Int
}

input MangaFilters {
  status: MangaStatus
  genres: [String!]
  isNsfw: Boolean
  year: Int
}

# Queries
extend type Query {
  manga(id: ID): Manga
  mangaBySlug(slug: String!): Manga
  mangas(limit: Int, offset: Int, filters: MangaFilters): [Manga!]!
  searchManga(query: String!): [Manga!]!
  chapter(id: ID!): Chapter
  chapters(mangaId: ID!, limit: Int, offset: Int): [Chapter!]!
}

# Mutations
extend type Mutation {
  createManga(input: CreateMangaInput!): Manga!
  updateManga(id: ID!, input: UpdateMangaInput!): Manga!
  deleteManga(id: ID!): Boolean!
  createChapter(input: CreateChapterInput!): Chapter!
  updateChapter(id: ID!, input: UpdateChapterInput!): Chapter!
  deleteChapter(id: ID!): Boolean!
}
